function AddSchool(){}AddSchool.prototype.uploadBadge=function(){var a=$("#school-badge");a.change(function(){var o=a[0].files[0],l=new FormData;l.append("file",o),acajax.post({url:"/upload_badge/",data:l,processData:!1,contentType:!1,success:function(o){var l=o.data.url;$(".custom-file-label").html(l)}})})},AddSchool.prototype.listenAddEvent=function(){var o=$("#submit-btn"),r=$("#school-name"),p=$("#school-level"),v=$("#school-category"),f=$("#super"),m=$(".custom-file-label"),g=$("#school-location"),_=$("#school-email"),b=$("#school-course");o.click(function(){var o=r.val(),l=p.val(),a=v.val(),c="1"===f.val(),t=m.html(),e=g.val(),n=_.val(),s=b.val(),d=tinyMCE.activeEditor.getContent(),i=$(this).attr("data-school-id"),u=null,h=null,h=i?(u="/edit_school/","修改成功！"):(u="/add_school/","注册成功！");acajax.post({url:u,data:{name:o,school_level:l,school_category:a,is_super:c,school_badge:t,location:e,email:n,course_des:s,desc:d,school_id:i},success:function(o){acalert.alertSuccess({msg:h,confirmCallback:function(){window.location.href="/school_list/"}})}})})},AddSchool.prototype.run=function(){this.uploadBadge(),this.listenAddEvent()},$(function(){(new AddSchool).run()});